<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>🤖 Empathy-Only Chat</title>
<style>
  body{margin:0;background:#0b0f14;color:#eaf2ff;font:16px/1.55 system-ui;padding-bottom:56px;}
  .wrap{max-width:880px;margin:0 auto;padding:16px}
  .card{background:#121821;border:1px solid #1f2a38;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .head{padding:14px 16px;border-bottom:1px solid #1f2a38;display:flex;gap:10px;align-items:center}
  .dot{width:10px;height:10px;border-radius:50%;background:#4ade80;box-shadow:0 0 8px #4ade80}
  #log{padding:10px 16px;max-height:62vh;overflow:auto;scroll-behavior:smooth}
  .msg{display:flex;gap:10px;margin:10px 0}
  .me .bubble{background:#1a2432}
  .bot .bubble{background:#12202a}
  .bubble{padding:10px 12px;border-radius:14px;max-width:80%;word-wrap:break-word;white-space:pre-wrap}
  form{display:flex;gap:10px;padding:12px;border-top:1px solid #1f2a38}
  input[type=text]{flex:1;padding:12px;border-radius:12px;border:1px solid #253347;background:#0e141c;color:#eaf2ff;outline:none}
  button{padding:12px 16px;border-radius:12px;border:1px solid #2b3a57;background:#1a2540;color:#e7efff;cursor:pointer}
</style>
</head>
<body>
  <div class="wrap card">
    <div class="head">
      <div class="dot"></div>
      <div class="title">Empathy-Only Assistant</div>
    </div>
    <div id="log"></div>
    <form id="f">
      <input id="q" type="text" placeholder="メッセージを入力…" autocomplete="off" />
      <button id="send">送信</button>
    </form>
  </div>

<script>
/* ========= 固定ルール応答 ========= */
function rule(key, regex, replyFn){ return {key, regex, replyFn}; }
const rules = [
  rule("greet.morning", /(おはよう|good\s*morning)/i,
    ()=> "おはよう！今日もいい感じで行けそうだね☀️"),
  rule("greet.hello", /(こんにちは|hi|hello)/i,
    ()=> "こんにちは！来てくれてうれしいよ🙌"),
  rule("bye", /(さよなら|またね|bye|see\s*you)/i,
    ()=> "またね！ゆっくり休んで、いつでも戻ってきて🫶"),
  rule("thanks", /(ありがとう|thanks|thx)/i,
    ()=> "こちらこそありがとう！その言葉が力になるよ✨"),
  rule("who", /(だれ|誰|あなたは誰|who\s*are\s*you)/i,
    ()=> "私は“Empathy-Only Assistant”。固定応答と曖昧返しで会話する人工無能だよ🤖")
];

/* ========= 曖昧ポジ返し（必ず返す） ========= */
const vagueReplies = [
  "いいね、その流れ来てる感じ！👍",
  "なるほど、それは面白い視点だね✨",
  "その気づき、めっちゃセンスある。🚀",
  "うんうん、勢いがあって良き！🔥",
  "君なら絶対いける。９９パーセント大丈夫🍀"
];
function vagueReply(){ return vagueReplies[Math.floor(Math.random()*vagueReplies.length)]; }

/* ========= 会話ロジック ========= */
function tryRules(user){
  for(const r of rules){ if(r.regex.test(user)) return r.replyFn(user); }
  return null;
}
function respond(user){
  const ruled = tryRules(user);
  const reply = ruled || vagueReply();
  add('bot', reply);
}
function add(role, text){
  const row=document.createElement('div');
  row.className='msg '+role;
  row.innerHTML=`<div class="bubble">${text}</div>`;
  log.appendChild(row); log.scrollTop=log.scrollHeight;
}

/* ========= UI処理 ========= */
const log=document.getElementById('log');
document.getElementById('f').addEventListener('submit',(e)=>{
  e.preventDefault();
  const q=document.getElementById('q'); const text=q.value.trim(); if(!text) return;
  add('me', text); q.value='';
  setTimeout(()=>respond(text), 140);
});

/* 初期メッセージ */
add('bot','よっしゃ、準備完了。挨拶してみて！おはよう / こんにちは / ありがとう 等。');
</script>
</body>
</html>
