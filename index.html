<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ¤– Empathy-Only Chat</title>
<style>
  body{margin:0;background:#0b0f14;color:#eaf2ff;font:16px/1.55 system-ui;padding-bottom:56px;}
  .wrap{max-width:880px;margin:0 auto;padding:16px}
  .card{background:#121821;border:1px solid #1f2a38;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .head{padding:14px 16px;border-bottom:1px solid #1f2a38;display:flex;gap:10px;align-items:center}
  .dot{width:10px;height:10px;border-radius:50%;background:#4ade80;box-shadow:0 0 8px #4ade80}
  #log{padding:10px 16px;max-height:62vh;overflow:auto;scroll-behavior:smooth}
  .msg{display:flex;gap:10px;margin:10px 0}
  .me .bubble{background:#1a2432}
  .bot .bubble{background:#12202a}
  .bubble{padding:10px 12px;border-radius:14px;max-width:80%;word-wrap:break-word;white-space:pre-wrap}
  form{display:flex;gap:10px;padding:12px;border-top:1px solid #1f2a38}
  input[type=text]{flex:1;padding:12px;border-radius:12px;border:1px solid #253347;background:#0e141c;color:#eaf2ff;outline:none}
  button{padding:12px 16px;border-radius:12px;border:1px solid #2b3a57;background:#1a2540;color:#e7efff;cursor:pointer}
</style>
</head>
<body>
  <div class="wrap card">
    <div class="head">
      <div class="dot"></div>
      <div class="title">Empathy-Only Assistant</div>
    </div>
    <div id="log"></div>
    <form id="f">
      <input id="q" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›â€¦" autocomplete="off" />
      <button id="send">é€ä¿¡</button>
    </form>
  </div>

<script>
/* ========= å›ºå®šãƒ«ãƒ¼ãƒ«å¿œç­” ========= */
function rule(key, regex, replyFn){ return {key, regex, replyFn}; }
const rules = [
  rule("greet.morning", /(ãŠã¯ã‚ˆã†|good\s*morning)/i,
    ()=> "ãŠã¯ã‚ˆã†ï¼ä»Šæ—¥ã‚‚ã„ã„æ„Ÿã˜ã§è¡Œã‘ãã†ã ã­â˜€ï¸"),
  rule("greet.hello", /(ã“ã‚“ã«ã¡ã¯|hi|hello)/i,
    ()=> "ã“ã‚“ã«ã¡ã¯ï¼æ¥ã¦ãã‚Œã¦ã†ã‚Œã—ã„ã‚ˆğŸ™Œ"),
  rule("bye", /(ã•ã‚ˆãªã‚‰|ã¾ãŸã­|bye|see\s*you)/i,
    ()=> "ã¾ãŸã­ï¼ã‚†ã£ãã‚Šä¼‘ã‚“ã§ã€ã„ã¤ã§ã‚‚æˆ»ã£ã¦ãã¦ğŸ«¶"),
  rule("thanks", /(ã‚ã‚ŠãŒã¨ã†|thanks|thx)/i,
    ()=> "ã“ã¡ã‚‰ã“ãã‚ã‚ŠãŒã¨ã†ï¼ãã®è¨€è‘‰ãŒåŠ›ã«ãªã‚‹ã‚ˆâœ¨"),
  rule("who", /(ã ã‚Œ|èª°|ã‚ãªãŸã¯èª°|who\s*are\s*you)/i,
    ()=> "ç§ã¯â€œEmpathy-Only Assistantâ€ã€‚å›ºå®šå¿œç­”ã¨æ›–æ˜§è¿”ã—ã§ä¼šè©±ã™ã‚‹äººå·¥ç„¡èƒ½ã ã‚ˆğŸ¤–")
];

/* ========= æ›–æ˜§ãƒã‚¸è¿”ã—ï¼ˆå¿…ãšè¿”ã™ï¼‰ ========= */
const vagueReplies = [
  "ã„ã„ã­ã€ãã®æµã‚Œæ¥ã¦ã‚‹æ„Ÿã˜ï¼ğŸ‘",
  "ãªã‚‹ã»ã©ã€ãã‚Œã¯é¢ç™½ã„è¦–ç‚¹ã ã­âœ¨",
  "ãã®æ°—ã¥ãã€ã‚ã£ã¡ã‚ƒã‚»ãƒ³ã‚¹ã‚ã‚‹ã€‚ğŸš€",
  "ã†ã‚“ã†ã‚“ã€å‹¢ã„ãŒã‚ã£ã¦è‰¯ãï¼ğŸ”¥",
  "å›ãªã‚‰çµ¶å¯¾ã„ã‘ã‚‹ã€‚ï¼™ï¼™ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå¤§ä¸ˆå¤«ğŸ€"
];
function vagueReply(){ return vagueReplies[Math.floor(Math.random()*vagueReplies.length)]; }

/* ========= ä¼šè©±ãƒ­ã‚¸ãƒƒã‚¯ ========= */
function tryRules(user){
  for(const r of rules){ if(r.regex.test(user)) return r.replyFn(user); }
  return null;
}
function respond(user){
  const ruled = tryRules(user);
  const reply = ruled || vagueReply();
  add('bot', reply);
}
function add(role, text){
  const row=document.createElement('div');
  row.className='msg '+role;
  row.innerHTML=`<div class="bubble">${text}</div>`;
  log.appendChild(row); log.scrollTop=log.scrollHeight;
}

/* ========= UIå‡¦ç† ========= */
const log=document.getElementById('log');
document.getElementById('f').addEventListener('submit',(e)=>{
  e.preventDefault();
  const q=document.getElementById('q'); const text=q.value.trim(); if(!text) return;
  add('me', text); q.value='';
  setTimeout(()=>respond(text), 140);
});

/* åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
add('bot','ã‚ˆã£ã—ã‚ƒã€æº–å‚™å®Œäº†ã€‚æŒ¨æ‹¶ã—ã¦ã¿ã¦ï¼ãŠã¯ã‚ˆã† / ã“ã‚“ã«ã¡ã¯ / ã‚ã‚ŠãŒã¨ã† ç­‰ã€‚');
</script>
</body>
</html>
